<?xml version="1.0" encoding="utf-8" ?>
<Window
    x:Class="PUBGNetworkMonitor.OverlayWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <Grid
        Width="32"
        Height="32"
        Background="#010101">
        <Grid.Resources>
            <Style x:Key="TransparentButtonStyle" TargetType="Button">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border
                                x:Name="ButtonBorder"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="{TemplateBinding Border.CornerRadius}">
                                <ContentPresenter
                                    x:Name="ContentPresenter"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    Content="{TemplateBinding Content}"
                                    ContentTemplate="{TemplateBinding ContentTemplate}">
                                    <VisualStateManager.VisualStateGroups>
                                        <VisualStateGroup x:Name="CommonStates">
                                            <VisualState x:Name="Normal" />
                                            <VisualState x:Name="PointerOver">
                                                <Storyboard>
                                                    <DoubleAnimation
                                                        Storyboard.TargetName="ContentPresenter"
                                                        Storyboard.TargetProperty="Opacity"
                                                        To="0.8"
                                                        Duration="0:0:0.1" />
                                                    <ColorAnimation
                                                        Storyboard.TargetName="ButtonBorder"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="#60FFFFFF"
                                                        Duration="0:0:0.1" />
                                                </Storyboard>
                                            </VisualState>
                                            <VisualState x:Name="Pressed">
                                                <Storyboard>
                                                    <DoubleAnimation
                                                        Storyboard.TargetName="ContentPresenter"
                                                        Storyboard.TargetProperty="Opacity"
                                                        To="0.6"
                                                        Duration="0:0:0.1" />
                                                    <ColorAnimation
                                                        Storyboard.TargetName="ButtonBorder"
                                                        Storyboard.TargetProperty="(Border.Background).(SolidColorBrush.Color)"
                                                        To="#80FFFFFF"
                                                        Duration="0:0:0.1" />
                                                </Storyboard>
                                            </VisualState>
                                        </VisualStateGroup>
                                    </VisualStateManager.VisualStateGroups>
                                </ContentPresenter>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </Grid.Resources>

        <!--  Main button with icon  -->
        <Button
            x:Name="OverlayButton"
            Width="32"
            Height="32"
            Margin="0"
            Padding="2"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Background="#40FFFFFF"
            BorderBrush="#60FFFFFF"
            BorderThickness="1"
            Click="OverlayButton_Click">
            <Image
                x:Name="FixLobbyConnectionIcon"
                Width="28"
                Height="28"
                Source="Assets/monitoring-system.png"
                Stretch="Uniform" />
        </Button>

        <!--  Spinner overlay that appears during loading  -->
        <Border
            x:Name="SpinnerOverlay"
            Width="32"
            Height="32"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Background="#80000000"
            CornerRadius="2"
            Visibility="Collapsed">
            <ProgressRing
                x:Name="LoadingSpinner"
                Width="24"
                Height="24"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Foreground="White"
                IsActive="False" />
        </Border>
    </Grid>
</Window>